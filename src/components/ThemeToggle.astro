---
---

<button 
  id="theme-toggle" 
  title="Toggle Light/Dark Mode" 
  class="w-10 h-10 flex items-center justify-center rounded-full text-stone-500 dark:text-violet-400 hover:bg-violet-100 dark:hover:bg-gray-800 transition-colors duration-300 cursor-pointer"
>
  <i id="theme-toggle-dark-icon" class="fas fa-moon fa-lg"></i>
  <i id="theme-toggle-light-icon" class="fas fa-sun fa-lg !hidden"></i>
</button>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const themeToggleBtn = document.getElementById('theme-toggle');
    const themeToggleDarkIcon = document.getElementById('theme-toggle-dark-icon');
    const themeToggleLightIcon = document.getElementById('theme-toggle-light-icon');

    function applyTheme() {
      const isDarkMode = localStorage.getItem('color-theme') === 'dark' || 
                        (!('color-theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches);
      
      if (isDarkMode) {
        document.documentElement.classList.add('dark');
        themeToggleLightIcon?.classList.remove('!hidden');
        themeToggleDarkIcon?.classList.add('!hidden');
      } else {
        document.documentElement.classList.remove('dark');
        themeToggleDarkIcon?.classList.remove('!hidden');
        themeToggleLightIcon?.classList.add('!hidden');
      }
    }

    // Apply theme immediately
    applyTheme();

    themeToggleBtn?.addEventListener('click', function() {
      const isDark = document.documentElement.classList.toggle('dark');
      localStorage.setItem('color-theme', isDark ? 'dark' : 'light');
      applyTheme();
    });

    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', () => {
      if (!('color-theme' in localStorage)) {
        applyTheme();
      }
    });
  });
</script>